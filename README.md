# Домашнее задание к занятию «Резервное копирование баз данных» Тимахова Наталья

# Задание 1. Резервное копирование

Для финансовой компании, которая хочет повысить надежность резервного копирования и обеспечить возможность быстрого восстановления данных, стоит рассмотреть несколько подходов. 

---

### 1.1 Полное восстановление данных за предыдущий день

Чтобы обеспечить восстановление данных в полном объёме за предыдущий день, можно использовать полное резервное копирование, которое выполняется ежедневно в определенное время, например, ночью или в период минимальной нагрузки на систему.

Полное резервное копирование включает в себя копирование всех данных и может выполняться по следующему графику:
- Каждый день создаётся полный снимок всей базы данных.
- Такие бэкапы можно хранить на внешних серверах или облачном хранилище для дополнительной безопасности.

Достоинства:
- Все данные легко восстанавливаются из одного резервного копирования.
- Упрощает управление, так как есть одно место для восстановления данных за целый день.

Недостатки:
- Требует значительных ресурсов хранения и времени для завершения полной копии, особенно на больших объёмах данных.

---

### 1.2 Восстановление данных за час до предполагаемой поломки

Для восстановления данных с точностью до часа, важно использовать инкрементное или дифференциальное резервное копирование совместно с регулярными журналами транзакций.

1. Инкрементное резервное копирование:
   - Каждый час после выполнения полного резервного копирования создаются инкрементные копии, в которых фиксируются только изменения с момента последнего бэкапа.
   - При сбое можно восстановить данные до нужного времени, применив последовательность инкрементных бэкапов к последнему полному бэкапу.

2. Журналирование транзакций:
   - Использование журналов транзакций позволяет восстанавливать базу до определенного состояния (point-in-time recovery) с точностью до одной транзакции. Если база поддерживает такую функцию, то можно восстанавливать данные с точностью до определенного времени.
   - Журналы транзакций могут архивироваться и записываться каждый час или чаще, что даст возможность «откатиться» до состояния, зафиксированного часом ранее.

Достоинства:
- Минимальный объём хранения, поскольку копируются только изменения.
- Поддержка точного времени восстановления данных в случае сбоя.

Недостатки:
- Сложность восстановления, поскольку необходимо последовательно накладывать инкрементные бэкапы на полное копирование.
- Более высокий риск ошибки при восстановлении, так как требуется больше этапов.

---

### 1.3 Мгновенное переключение на работающую базу при поломке

Для обеспечения бесперебойной работы базы данных при сбое можно использовать репликацию данных и кластеризацию. Репликация данных создает синхронизированные копии базы, а кластеризация позволяет автоматически переключаться на рабочий экземпляр базы при отказе основного.

1. Репликация:
   - Настраивается основная база данных (Primary) и резервная (Secondary), которая получает все обновления данных в режиме реального времени.
   - В случае сбоя основного сервера резервная база может быть настроена на автоматическое поднятие в роли основной.
  
2. Кластеризация и отказоустойчивость (Failover Clustering):
   - В кластере базы данных (например, с использованием PostgreSQL, MySQL или других систем, поддерживающих такую функцию) можно настроить автоматическое переключение на рабочий экземпляр в случае отказа основной базы.
   - При поломке система автоматически переключается на один из резервных узлов, что обеспечивает непрерывность работы.

3. Географически распределенные репликации:
   - Данные могут реплицироваться на географически удаленные серверы, что позволяет быстро восстановить доступ к базе в случае сбоя в одном из центров обработки данных.

Достоинства:
- Обеспечивает практически моментальное переключение на резервный сервер, минимизируя простой.
- Снижает вероятность потери данных, так как репликация происходит практически в реальном времени.

Недостатки:
- Требует сложной настройки и значительных ресурсов для поддержки реплицированной или кластеризованной инфраструктуры.
- Высокие затраты на оборудование и обслуживание дополнительных серверов.

--- 

Для финансовой компании, где надежность и минимизация простоев особенно важны, комбинированный подход, включающий полное резервное копирование, инкрементные бэкапы и кластеризацию, может быть оптимальным решением для обеспечения гибкости восстановления данных и отказоустойчивости базы.

